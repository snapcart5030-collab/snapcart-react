"use strict";(self.webpackChunksmilecheck=self.webpackChunksmilecheck||[]).push([[927],{927:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var s=r(555),d=r(43),c=r(722),a=r(407),l=r(579);const n=function(){const[e,t]=(0,d.useState)([]),[r]=(0,a.lT)(["token"]),[n,i]=(0,d.useState)(!1),[h,o]=(0,d.useState)("");return(0,d.useEffect)(()=>{r.token&&(async()=>{try{i(!0);const e=await c.A.get("http://localhost:5030/orders/myorders",{headers:{Authorization:"Bearer ".concat(r.token)}}),d=await Promise.all(e.data.map(async e=>{try{return"delivered"===(await c.A.get("http://localhost:5030/orderstatus/".concat(e._id))).data.status?(0,s.A)((0,s.A)({},e),{},{status:"delivered"}):null}catch(t){return null}}));t(d.filter(Boolean))}catch(e){o("Failed to load delivered orders.")}finally{i(!1)}})()},[r]),(0,l.jsxs)("div",{className:"container mt-5",children:[(0,l.jsx)("h2",{children:"\u2705 Delivered Orders"}),n&&(0,l.jsx)("p",{children:"Loading..."}),h&&(0,l.jsx)("p",{style:{color:"red"},children:h}),!n&&0===e.length&&(0,l.jsx)("p",{children:"No delivered orders yet."}),e.length>0&&(0,l.jsxs)("table",{className:"table mt-3 table-striped table-hover",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Image"}),(0,l.jsx)("th",{children:"Product"}),(0,l.jsx)("th",{children:"Qty"}),(0,l.jsx)("th",{children:"Price"}),(0,l.jsx)("th",{children:"Total"}),(0,l.jsx)("th",{children:"Date"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>{var t;return null===(t=e.products)||void 0===t?void 0:t.map((t,r)=>{const s=new Date(e.createdAt);return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("img",{src:t.productImage,alt:t.productName,style:{width:"60px",height:"60px",borderRadius:"8px",objectFit:"cover"}})}),(0,l.jsx)("td",{children:t.productName}),(0,l.jsx)("td",{children:t.quantity}),(0,l.jsxs)("td",{children:["\u20b9",t.price]}),(0,l.jsxs)("td",{children:["\u20b9",t.price*t.quantity]}),(0,l.jsx)("td",{children:s.toLocaleDateString("en-IN")})]},"".concat(e._id,"-").concat(r))})})})]})]})}}}]);
//# sourceMappingURL=927.a722b9c2.chunk.js.map