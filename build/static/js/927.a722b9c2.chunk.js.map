{"version":3,"file":"static/js/927.a722b9c2.chunk.js","mappings":"oLAoGA,QAhGA,WACE,MAAOA,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,KAC9BC,IAAWC,EAAAA,EAAAA,IAAW,CAAC,WACvBC,EAASC,IAAcJ,EAAAA,EAAAA,WAAS,IAChCK,EAAOC,IAAYN,EAAAA,EAAAA,UAAS,IAsCnC,OAJAO,EAAAA,EAAAA,WAAU,KACJN,EAAQO,OAhCcC,WAC1B,IACEL,GAAW,GACX,MAAMM,QAAYC,EAAAA,EAAMC,IAAI,wCAAyC,CACnEC,QAAS,CAAEC,cAAc,UAADC,OAAYd,EAAQO,UAGxCQ,QAAkBC,QAAQC,IAC9BR,EAAIS,KAAKC,IAAIX,UACX,IAIE,MAA8B,qBAHNE,EAAAA,EAAMC,IAAI,qCAADG,OACMM,EAAMC,OAE/BH,KAAKI,QACjBC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYH,GAAK,IAAEE,OAAQ,cAEtB,IACT,CAAE,MAAAE,GACA,OAAO,IACT,KAIJ1B,EAAUiB,EAAUU,OAAOC,SAC7B,CAAE,MAAOC,GACPtB,EAAS,mCACX,CAAC,QACCF,GAAW,EACb,GAImByB,IAClB,CAAC5B,KAGF6B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,4BAEH7B,IAAW8B,EAAAA,EAAAA,KAAA,KAAAD,SAAG,eACd3B,IAAS4B,EAAAA,EAAAA,KAAA,KAAGC,MAAO,CAAEC,MAAO,OAAQH,SAAE3B,KACrCF,GAA6B,IAAlBL,EAAOsC,SAAgBH,EAAAA,EAAAA,KAAA,KAAAD,SAAG,6BAEtClC,EAAOsC,OAAS,IACfN,EAAAA,EAAAA,MAAA,SAAOC,UAAU,uCAAsCC,SAAA,EACrDC,EAAAA,EAAAA,KAAA,SAAAD,UACEF,EAAAA,EAAAA,MAAA,MAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,WACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,aACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,SACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,WACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,WACJC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,eAGRC,EAAAA,EAAAA,KAAA,SAAAD,SACGlC,EAAOsB,IAAKC,IAAK,IAAAgB,EAAA,OACF,QADEA,EAChBhB,EAAMiB,gBAAQ,IAAAD,OAAA,EAAdA,EAAgBjB,IAAI,CAACmB,EAAMC,KACzB,MAAMC,EAAO,IAAIC,KAAKrB,EAAMsB,WAC5B,OACEb,EAAAA,EAAAA,MAAA,MAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,UACEC,EAAAA,EAAAA,KAAA,OACEW,IAAKL,EAAKM,aACVC,IAAKP,EAAKQ,YACVb,MAAO,CACLc,MAAO,OACPC,OAAQ,OACRC,aAAc,MACdC,UAAW,cAIjBlB,EAAAA,EAAAA,KAAA,MAAAD,SAAKO,EAAKQ,eACVd,EAAAA,EAAAA,KAAA,MAAAD,SAAKO,EAAKa,YACVtB,EAAAA,EAAAA,MAAA,MAAAE,SAAA,CAAI,SAAEO,EAAKc,UACXvB,EAAAA,EAAAA,MAAA,MAAAE,SAAA,CAAI,SAAEO,EAAKc,MAAQd,EAAKa,aACxBnB,EAAAA,EAAAA,KAAA,MAAAD,SAAKS,EAAKa,mBAAmB,aAAc,GAAAvC,OAjBjCM,EAAMC,IAAG,KAAAP,OAAIyB,eA2B3C,C","sources":["components/PreviousOrders.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useCookies } from \"react-cookie\";\r\n\r\nfunction PreviousOrders() {\r\n  const [orders, setOrders] = useState([]);\r\n  const [cookies] = useCookies([\"token\"]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // ✅ Fetch only delivered orders\r\n  const fetchPreviousOrders = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(\"http://localhost:5030/orders/myorders\", {\r\n        headers: { Authorization: `Bearer ${cookies.token}` },\r\n      });\r\n\r\n      const delivered = await Promise.all(\r\n        res.data.map(async (order) => {\r\n          try {\r\n            const statusRes = await axios.get(\r\n              `http://localhost:5030/orderstatus/${order._id}`\r\n            );\r\n            if (statusRes.data.status === \"delivered\") {\r\n              return { ...order, status: \"delivered\" };\r\n            }\r\n            return null;\r\n          } catch {\r\n            return null;\r\n          }\r\n        })\r\n      );\r\n\r\n      setOrders(delivered.filter(Boolean));\r\n    } catch (err) {\r\n      setError(\"Failed to load delivered orders.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (cookies.token) fetchPreviousOrders();\r\n  }, [cookies]);\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2>✅ Delivered Orders</h2>\r\n\r\n      {loading && <p>Loading...</p>}\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n      {!loading && orders.length === 0 && <p>No delivered orders yet.</p>}\r\n\r\n      {orders.length > 0 && (\r\n        <table className=\"table mt-3 table-striped table-hover\">\r\n          <thead>\r\n            <tr>\r\n              <th>Image</th>\r\n              <th>Product</th>\r\n              <th>Qty</th>\r\n              <th>Price</th>\r\n              <th>Total</th>\r\n              <th>Date</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {orders.map((order) =>\r\n              order.products?.map((item, i) => {\r\n                const date = new Date(order.createdAt);\r\n                return (\r\n                  <tr key={`${order._id}-${i}`}>\r\n                    <td>\r\n                      <img\r\n                        src={item.productImage}\r\n                        alt={item.productName}\r\n                        style={{\r\n                          width: \"60px\",\r\n                          height: \"60px\",\r\n                          borderRadius: \"8px\",\r\n                          objectFit: \"cover\",\r\n                        }}\r\n                      />\r\n                    </td>\r\n                    <td>{item.productName}</td>\r\n                    <td>{item.quantity}</td>\r\n                    <td>₹{item.price}</td>\r\n                    <td>₹{item.price * item.quantity}</td>\r\n                    <td>{date.toLocaleDateString(\"en-IN\")}</td>\r\n                  </tr>\r\n                );\r\n              })\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PreviousOrders;\r\n"],"names":["orders","setOrders","useState","cookies","useCookies","loading","setLoading","error","setError","useEffect","token","async","res","axios","get","headers","Authorization","concat","delivered","Promise","all","data","map","order","_id","status","_objectSpread","_unused","filter","Boolean","err","fetchPreviousOrders","_jsxs","className","children","_jsx","style","color","length","_order$products","products","item","i","date","Date","createdAt","src","productImage","alt","productName","width","height","borderRadius","objectFit","quantity","price","toLocaleDateString"],"sourceRoot":""}